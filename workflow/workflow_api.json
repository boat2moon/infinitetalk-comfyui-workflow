{
  "1": {
    "class_type": "WanVideoVAELoader",
    "inputs": {
      "model_name": "Wan2_1_VAE_bf16.safetensors",
      "precision": "bf16"
    }
  },
  "2": {
    "class_type": "WanVideoTextEncodeCached",
    "inputs": {
      "model_name": "umt5-xxl-enc-bf16.safetensors",
      "precision": "bf16",
      "positive_prompt": "a person is talking naturally",
      "negative_prompt": "bad quality, blurry, distorted face, static, subtitles, worst quality",
      "quantization": "disabled",
      "use_disk_cache": true,
      "device": "gpu"
    }
  },
  "3": {
    "class_type": "CLIPVisionLoader",
    "inputs": {
      "clip_name": "clip_vision_h.safetensors"
    }
  },
  "4": {
    "class_type": "Wav2VecModelLoader",
    "inputs": {
      "model": "wav2vec2-chinese-base_fp16.safetensors",
      "base_precision": "fp16",
      "load_device": "main_device"
    }
  },
  "5": {
    "class_type": "MultiTalkModelLoader",
    "inputs": {
      "model": "WanVideo/InfiniteTalk/Wan2_1-InfiniteTalk_Single_Q8.gguf"
    }
  },
  "6": {
    "class_type": "LoadAudio",
    "inputs": {
      "audio": "ref_cat14.wav"
    }
  },
  "7": {
    "class_type": "LoadImage",
    "inputs": {
      "image": "bainian4_frame.png"
    }
  },
  "8": {
    "class_type": "MultiTalkWav2VecEmbeds",
    "inputs": {
      "wav2vec_model": [
        "4",
        0
      ],
      "audio_1": [
        "6",
        0
      ],
      "normalize_loudness": true,
      "num_frames": 1069,
      "fps": 25.0,
      "audio_scale": 1.5,
      "audio_cfg_scale": 1.0,
      "multi_audio_type": "para"
    }
  },
  "17": {
    "class_type": "LoadImage",
    "inputs": {
      "image": "face_bainian4.png"
    }
  },
  "9": {
    "class_type": "WanVideoClipVisionEncode",
    "inputs": {
      "clip_vision": [
        "3",
        0
      ],
      "image_1": [
        "7",
        0
      ],
      "image_2": [
        "17",
        0
      ],
      "strength_1": 1.0,
      "strength_2": 1.0,
      "crop": "center",
      "combine_embeds": "concat",
      "force_offload": true,
      "tiles": 4,
      "ratio": 0.5
    }
  },
  "10": {
    "class_type": "WanVideoImageToVideoMultiTalk",
    "inputs": {
      "vae": [
        "1",
        0
      ],
      "start_image": [
        "7",
        0
      ],
      "width": 464,
      "height": 832,
      "frame_window_size": 81,
      "motion_frame": 9,
      "force_offload": false,
      "colormatch": "disabled",
      "tiled_vae": false,
      "clip_embeds": [
        "9",
        0
      ],
      "mode": "infinitetalk"
    }
  },
  "11": {
    "class_type": "WanVideoLoraSelect",
    "inputs": {
      "lora": "lightx2v_I2V_14B_480p_cfg_step_distill_rank64_bf16.safetensors",
      "strength": 1.0,
      "merge_loras": false
    }
  },
  "12": {
    "class_type": "WanVideoBlockSwap",
    "inputs": {
      "blocks_to_swap": 20,
      "offload_img_emb": false,
      "offload_txt_emb": false,
      "use_non_blocking": true,
      "vace_blocks_to_swap": 0,
      "prefetch_blocks": 1,
      "block_swap_debug": false
    }
  },
  "13": {
    "class_type": "WanVideoModelLoader",
    "inputs": {
      "model": "WanVideo/I2V/wan2.1-i2v-14b-480p-Q8_0.gguf",
      "base_precision": "bf16",
      "quantization": "disabled",
      "load_device": "offload_device",
      "attention_mode": "sageattn",
      "lora": [
        "11",
        0
      ],
      "block_swap_args": [
        "12",
        0
      ],
      "multitalk_model": [
        "5",
        0
      ]
    }
  },
  "14": {
    "class_type": "WanVideoSampler",
    "inputs": {
      "model": [
        "13",
        0
      ],
      "text_embeds": [
        "2",
        0
      ],
      "image_embeds": [
        "10",
        0
      ],
      "multitalk_embeds": [
        "8",
        0
      ],
      "steps": 4,
      "cfg": 1.0,
      "shift": 11.0,
      "seed": 2,
      "scheduler": "unipc",
      "force_offload": true,
      "riflex_freq_index": 0
    }
  },
  "15": {
    "class_type": "WanVideoDecode",
    "inputs": {
      "vae": [
        "1",
        0
      ],
      "samples": [
        "14",
        0
      ],
      "enable_vae_tiling": false,
      "tile_x": 272,
      "tile_y": 272,
      "tile_stride_x": 144,
      "tile_stride_y": 128,
      "normalization": "default"
    }
  },
  "16": {
    "class_type": "VHS_VideoCombine",
    "inputs": {
      "images": [
        "15",
        0
      ],
      "audio": [
        "6",
        0
      ],
      "frame_rate": 25,
      "loop_count": 0,
      "filename_prefix": "IT_bainian4_ref_cat14",
      "format": "video/h264-mp4",
      "pingpong": false,
      "save_output": true
    }
  }
}
